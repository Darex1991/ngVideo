/*! ng-video by Adam Timberlake <adam.timberlake@gmail.com> created on 2014-07-10 */
!function(a){"use strict";var b=a.module("ngVideo",[]);b.constant("ngVideoOptions",{RESTRICT:"CA",REFRESH:50,SCREEN:"vi-screen"}),b.value("ngVideoPlaylist",[]),b.service("video",["$rootScope","$timeout","ngVideoPlaylist",function(a,b,c){var d={};return d.addSource=function(b,d){var e={type:b,src:d},f=c.push(e);return a.$broadcast("ng-video/add",e),f},d.throwException=function(a){throw"ngVideo: "+a+"."},d}]),b.directive("ngVideo",["video","ngVideoPlaylist","ngVideoOptions",function(a,b,c){return{restrict:c.RESTRICT,scope:!0,controller:["$rootScope","$scope",function(c,d){d.video=b[0]||null,d.player={},d.playing=!1,d.loading=!0,d.attachEvents=function(a){!function(){var b=function(a,b){return function(){d[a]=b,d.$apply()}};a.bind("play",b("playing",!0)),a.bind("pause",b("playing",!1)),a.bind("ended",b("playing",!1)),a.bind("loadstart",b("loading",!0))}(),a.bind("loadeddata",function(){d.$apply(function(){d.loading=!1,c.$broadcast("ng-video/reset"),d.playing&&d.play()})})},d.open=function(b){"src"in b&&"type"in b||a.throwException("Passed an invalid video model to open"),d.player.setAttribute("src",b.src),d.player.setAttribute("type",b.type),d.player.load()}}],link:function(b,d){var e=d.find("video");(0===e.length||"undefined"==typeof e.attr(c.SCREEN))&&a.throwException("Must add ng-video-screen directive"),b.player=e[0],b.attachEvents(e),b.video&&b.open(b.video)}}}])}(window.angular),function(a){"use strict";var b=a.module("ngVideo"),c=["play","pause"];b.directive("viControls",["ngVideoOptions",function(a){return{restrict:a.RESTRICT,controller:["$scope",function(a){a.play=function(){a.player.play()},a.pause=function(){a.player.pause()}}]}}]);var d=function(a){var c=a.charAt(0).toUpperCase()+a.slice(1);b.directive("viControls"+c,["video","ngVideoOptions",function(b,c){return{restrict:c.RESTRICT,link:function(c,d){"function"!=typeof c[a]&&b.throwException("Control type '"+a+"' is unsupported"),d.bind("click",c[a])}}}])};a.forEach(c,function(a){d(a)})}(window.angular),function(a,b){"use strict";var c=["duration","currentTime"];a.module("ngVideo").directive("viFeedback",["ngVideoOptions",function(d){return{restrict:d.RESTRICT,controller:["$scope","$interval","$window","ngVideoOptions",function(d,e,f,g){d.duration=0,d.lastUpdate=0,d.currentTime=0,d.buffered=0,d.interval={},d.grabStatistics=function(){var e=d.player;a.forEach(c,function(a){d[a]=isNaN(d.player[a])?d[a]:d.player[a]}),0!==d.player.buffered.length&&(d.buffered=100*b.round(e.buffered.end(0)/e.duration)),d.lastUpdate=(new f.Date).getTime()},d.beginPolling=function(){d.interval=e(d.grabStatistics,g.REFRESH)},d.endPolling=function(){e.cancel(d.interval)},d.$on("ng-video/reset",function(){d.player.currentTime=0,d.grabStatistics()}),d.$watch("playing",function(a){return d.grabStatistics(),a?void d.beginPolling():void d.endPolling()})}]}}])}(window.angular,window.Math),function(a){"use strict";a.module("ngVideo").directive("viPlaylist",["ngVideoPlaylist","ngVideoOptions",function(a,b){return{restrict:b.RESTRICT,controller:["$scope",function(b){b.videos=a}]}}])}(window.angular),function(a){"use strict";a.module("ngVideo").directive("viScreen",["ngVideoOptions",function(a){return{restrict:a.RESTRICT,link:function(){}}}])}(window.angular),function(a){"use strict";a.module("ngVideo").directive("viTimeline",["ngVideoOptions",function(a){return{restrict:a.RESTRICT,template:'<input type="range" value="0" />',replace:!0,link:function(a,b){a.wasPlaying=!1,a.$on("ng-video/reset",function(){b.val(0)}),a.$watch("lastUpdate",function(){if(a.playing){var c=a.currentTime/a.duration*100;b.val(c)}b.bind("mousedown",function(){a.wasPlaying=a.playing,a.pause()}),b.bind("mouseup",function(){a.wasPlaying&&a.play()}),b.bind("change",function(){a.player.currentTime=b.val()/100*a.player.duration})})}}}])}(window.angular),function(a){"use strict";a.module("ngVideo").directive("viVolume",["ngVideoOptions",function(a){return{restrict:a.RESTRICT,link:function(){}}}])}(window.angular);